#!/usr/bin/env python3
import serial
import random

def checksum(array):
    sum = 0
    for i in array:
        sum = sum + i
    array.append(sum>>8)
    array.append(sum%256)
    return array

ser = serial.Serial(port="/dev/ttyS0", baudrate=115200)

header = [0xFA,0xFB,0xFC,0xFD,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x04,0x67,0xFA,0xFB,0xFC,0xFD,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x01,0x00,0x00,0x00,0x01,0x8E,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01]
data = []
for i in range(0,384):
    if(i%4==0):
        data.append(random.randint(0x3D,0x40))
    else:
        data.append(random.randint(0x0,0xFF))
    
samples = header + data
samples = checksum(samples)
samples = bytearray(samples)
print(samples)

ser.write(samples)